
\documentclass[10pt,letterpaper]{article}
%\pdfminorversion=5
%\pdfobjcompresslevel=3 
%\pdfcompresslevel=9

\usepackage{hyperref}
\usepackage{url}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage[caption=false,font=footnotesize]{subfig}

\usepackage{fourier}
\usepackage{amsmath}
\usepackage{overpic}
\usepackage{pgfplots}
\graphicspath{{./figs/}}
\newcommand{\figheight}{1.0in}
% Fonts
\usepackage[T1]{fontenc}
%\usepackage[urw-garamond]{mathdesign}

% Set your name here
\def\name{Shiva Shahrokhi}

% The following metadata will show up in the PDF properties
\hypersetup{
  colorlinks = false,
  urlcolor = black,
  pdfauthor = {\name},
  pdfkeywords = {},
  pdftitle = {\name: Shiva Weekly Report},
  pdfsubject = {Weekly Report},
  pdfpagemode = UseNone
}

\geometry{
  body={7.6in, 9.75in},
  left=0.5in,
  top=0.75in
}


% Customize page headers
\pagestyle{myheadings}
\markright{\name}
\thispagestyle{empty}

% Custom section fonts
\usepackage{sectsty}
\sectionfont{\rmfamily\mdseries\Large}
\subsectionfont{\rmfamily\mdseries\itshape\large}

% Other possible font commands include:
% \ttfamily for teletype,
% \sffamily for sans serif,
% \bfseries for bold,
% \scshape for small caps,
% \normalsize, \large, \Large, \LARGE sizes.

% Don't indent paragraphs.
\setlength\parindent{0em}

% Make lists without bullets and compact spacing
\renewenvironment{itemize}{
  \begin{list}{}{
    \setlength{\leftmargin}{1.5em}
    \setlength{\itemsep}{0.25em}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0.25em}
  }
}{
  \end{list}
}
\pgfmathdeclarefunction{gauss}{2}{%
  \pgfmathparse{1/(#2*sqrt(2*pi))*exp(-((x-#1)^2)/(2*#2^2))}%
}

\begin{document}
The OpenLoop controller: We want to control position and velocity of the robots and deciding about force for reaching our desired position and velocity. So our input is going to be accelerator(\emph{F = ma}). If we show acceleration by \emph{a}, velocity by \emph{v} and position in x coordinate by \emph{$P_x$} and in y coordinate by \emph{$P_y$}, we have the following equations
\begin{equation}
\dot{P}_x = v_x
\end{equation}
\begin{equation}
\dot{v}_x = a_x
\end{equation}
\begin{equation}
\ddot{P}_x= a_x
\end{equation}
Respectively we have the following equations for y axis:
\begin{equation}
\dot{P}_y= v_y
\end{equation}
\begin{equation}
\dot{v}_y = a_y
\end{equation}
\begin{equation}
\ddot{P}_y= a_y
\end{equation}


The state-space representation of our OpenLoop controller is: 
\begin{multline}
\\
\dot{x}(t)  =  A x(t) + B u(t) + We(t)\\
y = C x(t) + D u(t)\\
\end{multline}

where \emph{x(t)} represents our states, \emph{u(t)} is our input and \emph{e(t)} represents noise in the system. We also have \emph{y} as our output.\\
First we assume that we don't have noise in the system and we also have just one robot. As mentioned, \emph{a} is our input and \emph{x, y,} and their velocities are our states that we want to control.\\
We define our states as following:
\begin{equation}
X_1 = P_x 
\end{equation}
\begin{equation}
\dot{X}_1 = X_2 = \dot{P}_x = v_x
\end{equation}
\begin{equation}
X_3 = P_y 
\end{equation}
\begin{equation}
\dot{X}_3 = X_4 = \dot{P}_y = v_y 
\end{equation}


So our state space representation is:
\begin{equation}
\begin{bmatrix}
\dot{X}_1\\ 
\dot{X}_2\\
\dot{X}_3\\
\dot{X}_4
\end{bmatrix} = \begin{bmatrix}
0 & 1 & 0 & 0 \\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 1\\
0 & 0 & 0 & 0
\end{bmatrix}  \begin{bmatrix}
X_1\\
X_2\\
X_3\\
X_4
\end{bmatrix} + \begin{bmatrix}
0\\
1\\
0\\
1
\end{bmatrix} a
\end{equation}

We want to find number of states that we can control. we need to know \emph{B, AB,$A^2$B, $A^3$B, ...}.
\begin{equation}
 B= \begin{bmatrix} 
0\\
1\\
0\\
1
\end{bmatrix}
,
 AB= \begin{bmatrix} 
1\\
0\\
1\\
0
\end{bmatrix}
,
 A^2B= \begin{bmatrix} 
0\\
0\\
0\\
0
\end{bmatrix}, ...
\end{equation}
So we have 2 controllable states. (One for the x axis and one for the y axis.)

we know that we can control velocity of our robot, we want to see what happens if we had more than one robot? As we saw here, $v_x$ is completely independent of $v_y$, so if we wanted to have n robots, we had n states in x axis, and n states in y axis, which were completely independent from each other. So assume we have n robots and want to control them in x axis:\\
\begin{equation}
\dot{P}_{x1} = v_{x1}
\end{equation}
\begin{equation}
\dot{v}_{x1} = a_{x1}
\end{equation}

\begin{equation}
\dot{P}_{x2}= v_{x2}
\end{equation}
\begin{equation}
\dot{v}_{x2} = a_{x2}
\end{equation}
\centering
.\\
.\\
.

\begin{equation}
\dot{P}_{xn}= v_{xn}
\end{equation}
\begin{equation}
\dot{v}_{xn} = a_{xn}
\end{equation}

\begin{flushleft}
So our state-space representation will be:
\begin{equation}
\begin{bmatrix}
\dot{X}_1\\ 
\dot{X}_2\\
.\\
.\\
.\\
\dot{X}_{n-1}\\
\dot{X}_n

\end{bmatrix} = \begin{bmatrix}
0 & 1 & . & . & . & 0 & 0 \\
0 & 0 & . & . & . & 0 & 0 \\
0 & 0 & 0 & 1 & . & 0 & 0 \\
0 & 0 & 0 & 0 & . & 0 & 0 \\
. & . & . & . & . & . & . \\
0 & 0 & . & . & . & 0 & 1 \\
0 & 0 & . & . & . & 0 & 0 
\end{bmatrix}  \begin{bmatrix}
X_1\\
X_2\\
.\\
.\\
.\\
X_{n-1}\\
X_n
\end{bmatrix} + \begin{bmatrix}
0\\
1\\
.\\
.\\
.\\
0\\
1
\end{bmatrix} a
\end{equation}

If we had n robots, we had exactly the same symmetry of what we had for 1 robot. We can control two states because:
\begin{equation}
 B= \begin{bmatrix} 
0\\
1\\
.\\
.\\
.\\
0\\
1
\end{bmatrix}
,
 AB= \begin{bmatrix} 
1\\
0\\
.\\
.\\
.\\
1\\
0
\end{bmatrix}
,
 A^2B= \begin{bmatrix} 
0\\
0\\
.\\
.\\
.\\
0\\
0
\end{bmatrix}, ...
\end{equation}  So it seems that for any number of robots if we give a global command to them, we have just two states to control them. So it is obvious that we can not control position of all the robots, but it shows that we can control average position of the robots, and average linear velocity of them.\\

Now, we assume that we don't have the symmetry by having a noise (e(t) in equation (7)). Assume that noise has a Gaussian distribution:\\
\begin{equation}
P(x) = \frac{1}{{\sigma \sqrt {2\pi } }}e^{{{ - \left( {x - \mu } \right)^2 } \mathord{\left/ {\vphantom {{ - \left( {x - \mu } \right)^2 } {2\sigma ^2 }}} \right. \kern-\nulldelimiterspace} {2\sigma ^2 }}}
\end{equation}

After a while, if we have lots of robots, we should have some bell shape of their position because of noise:\\
\end{flushleft}
\centering{\begin{tikzpicture}
\begin{axis}[
  no markers, domain=-4:4, samples=100,
  axis lines*=left, xlabel=$t$, ylabel=$x$,
  every axis y label/.style={at=(current axis.above origin),anchor=south},
  every axis x label/.style={at=(current axis.right of origin),anchor=west},
  height=5cm, width=12cm,
  xtick={0}, ytick=\empty,
  enlargelimits=false, clip=false, axis on top,
  grid = major
  ]
  %\addplot [fill=cyan!20, draw=none, domain=-4:1] {gauss(0,1)} \closedcycle;
  %\addplot [fill=cyan!20, draw=none, domain=-4:1] {gauss(0,1)+ gauss(2,1)} \closedcycle;
  \addplot [fill=cyan!20, draw=none, domain=0:8] {gauss(4,1)} \closedcycle;
  \addplot [very thick,cyan!50!black , domain= 0:8 ] {gauss(4,1)};
  %\addplot [very thick,cyan!50!black , domain= -4:1] {gauss(2,1)};


%\draw [yshift=-0.6cm, latex-latex](axis cs:-1,0) -- node [fill=white] {Mirrored} (axis cs:1,0);
\end{axis}

\end{tikzpicture}
}
\\


Probability of the position of the robots, if we have Gaussian noise. \\


\begin{flushleft}
If robots face a wall, we expect to have the following shape:\\
\end{flushleft} 
\centering{
\begin{tikzpicture}
\begin{axis}[
  no markers, domain=-4:4, samples=100,
  axis lines*=left, xlabel=$t$, ylabel=$x$,
  every axis y label/.style={at=(current axis.above origin),anchor=south},
  every axis x label/.style={at=(current axis.right of origin),anchor=west},
  height=5cm, width=12cm,
  xtick={0,5}, ytick=\empty,
  enlargelimits=false, clip=false, axis on top,
  grid = major
  ]
  %\addplot [fill=cyan!20, draw=none, domain=0:5] {gauss(6,1)} \closedcycle;
  \addplot [fill=red!20, draw=none, domain=0:5] {gauss(4,1)+ gauss(6,1)} \closedcycle;
  %\addplot [fill=cyan!20, draw=none, domain=-4:4] {gauss(0,2)} \closedcycle;
  \addplot [very thick,cyan!50!black, domain= 0:8 ] {gauss(4,1)};
  \addplot [very thick,cyan!50!black , domain= 0:5] {gauss(6,1)};

\draw [yshift=-0.6cm, latex-latex](axis cs:3,0) -- node [fill=white] {Mirrored} (axis cs:5,0);
\end{axis}

\end{tikzpicture}
}
\end{document}